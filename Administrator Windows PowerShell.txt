PS C:\Users\najia\Desktop\spring_boot_migrator_solution\SBM> C:\Users\najia\.jdks\corretto-17.0.7\bin\java.exe -jar C:\Users\najia\Desktop\spring_boot_migrator_solution\SBM\spring-boot-migrator.jar
--------------------------------------------------------------------------------------------------
                _               _                 _               _                 _
 ___ _ __  _ __(_)_ __   __ _  | |__   ___   ___ | |_   _ __ ___ (_) __ _ _ __ __ _| |_ ___  _ __
/ __| '_ \| '__| | '_ \ / _` | | '_ \ / _ \ / _ \| __| | '_ ` _ \| |/ _` | '__/ _` | __/ _ \| '__|
\__ \ |_) | |  | | | | | (_| | | |_) | (_) | (_) | |_  | | | | | | | (_| | | | (_| | || (_) | |
|___/ .__/|_|  |_|_| |_|\__, | |_.__/ \___/ \___/ \__| |_| |_| |_|_|\__, |_|  \__,_|\__\___/|_|
    |_|                 |___/                                       |___/

Find us...
on GitHub:      https://github.com/spring-projects-experimental/spring-boot-migrator
on Slack:       https://vmware.slack.com/archives/CKB9VJE68 #spring-boot-migrator

This project contains a lot of love. But still, there will be bugs...
So please, give us Feedback:   https://github.com/spring-projects-experimental/spring-boot-migrator/issues
Also, if you like the project please give a star on GitHub.

THANK YOU!

Properties:
-----------
Git Support enabled: true

    - If `sbm.gitSupportEnabled` is `true` and the scanned project is a Git project,
      the git hash will be read during scan.
    - Before each 'apply' it will be verified that no uncommitted changes exist and that
      the stored git hash matches the hash read during scan or after last commit.
      If this is not true a new 'scan' will be done.
    - After each 'apply' it will be verified that no uncommitted changes exist and the Git hash matches.
      This prevents changes in the scanned project during 'apply'.
    - After each 'apply' an automated commit will be done and the new Git hash will be read.
    - If this flag is 'true' IT IS IMPORTANT THAT NO UNCOMMITTED FILES EXIST in the scanned project.

    Use -Dsbm.gitSupportEnabled=true|false as VM parameter on startup to set the property.

Base Package: org.springframework.sbm

    - The package for new classes when no base package can be calculated

    Use -Dsbm.defaultBasePackage=com.acme.packagename as VM parameter on startup to set the property.

TriggerMesh transformation support of Dataweave: false

    - When applying the mule-to-boot recipe, use `sbm.muleTriggerMeshTransformEnabled` to
      generate the code required to send the Dataweave transformation to TriggerMesh using
      the TriggerMesh Dataweave transformation service (https://docs.triggermesh.io/guides/dataweavetransformation/).
    - This will require a TriggerMesh transformation exist on your Kubernetes cluster to function. When running the
      service, be sure to set the `K_SINK` environment variable to your exposed service URL.

    Use -Dsbm.muleTriggerMeshTransformEnabled=true|false as VM parameter on startup to set property.

Get Started:
------------
Type

"help" - to display a list all of the available commands.
"scan <dir>" - to scan an application

--------------------------------------------------------------------------------------------------

migrator:> scan C:/Users/najia/Desktop/spring_boot_migrator_solution/workspace-mulesoft/mule-springboot

scanning 'C:/Users/najia/Desktop/spring_boot_migrator_solution/workspace-mulesoft/mule-springboot'

Checked preconditions for 'C:\Users\najia\Desktop\spring_boot_migrator_solution\workspace-mulesoft\mule-springboot'
[ok] Found pom.xml.
[ok] 'sbm.gitSupportEnabled' is 'true', changes will be committed to branch [mule4.4_springboot_migrated_1] after each recipe.
[ok] Required Java version (17) was found.
[ok] Found required source dir 'src/main/java'.


Maven        100% │██████████████████████████████████│ 2/2 (0:00:04 / 0:00:00)

Applicable recipes:

  1) initialize-spring-boot-migration
     -> Initialize an application as Spring Boot application.
  2) migrate-mule-to-boot
     -> Migrate Mulesoft 3.9 to Spring Boot.
  3) cn-spring-cloud-config-server
     -> Externalize properties to Spring Cloud Config Server
  4) sbu30-set-java-version
     -> Spring boot 3.0 Upgrade - Set java version property in build file
  5) sbu30-add-milestone-repositories
     -> Spring boot 3.0 Upgrade - Add milestone repository for dependencies and plugins
  6) sbu30-225-logging-date-format
     -> Spring boot 3.0 Upgrade - Logging Date Format

Run command '> apply <recipe-number>' to apply a recipe.

mule-springboot:> apply 2
Applying recipe 'migrate-mule-to-boot'
[..] Migrating Mulesoft to Spring Boot
    [..] Converting Mulesoft files
        [ok] Adding 3 dependencies
        [ok] Adding 14 methods
Action [JavaDSLAction2] 'Migrating Mulesoft to Spring Boot' failed: java.lang.RuntimeException: Exception while visiting project file 'C:\Users\najia\Desktop\spring_boot_migrator_solution\workspace-mulesoft\mule-springboot\src\main\java\org\springframework\sbm\FlowConfigurations.java (in FlowConfigurations)', caused by: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0, at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
Details of the error have been omitted. You can use the stacktrace command to print the full stacktrace.
mule-springboot:> stacktrace
org.springframework.sbm.engine.recipe.ActionFailedException: Action [JavaDSLAction2] 'Migrating Mulesoft to Spring Boot' failed: java.lang.RuntimeException: Exception while visiting project file 'C:\Users\najia\Desktop\spring_boot_migrator_solution\workspace-mulesoft\mule-springboot\src\main\java\org\springframework\sbm\FlowConfigurations.java (in FlowConfigurations)', caused by: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0, at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
        at org.springframework.sbm.engine.recipe.Action.applyWithStatusEvent(Action.java:43)
        at org.springframework.sbm.engine.recipe.Recipe.apply(Recipe.java:101)
        at org.springframework.sbm.engine.commands.ApplyCommand.execute(ApplyCommand.java:69)
        at org.springframework.sbm.shell.ApplyShellCommand.apply(ApplyShellCommand.java:70)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at org.springframework.shell.command.invocation.InvocableShellMethod.doInvoke(InvocableShellMethod.java:306)
        at org.springframework.shell.command.invocation.InvocableShellMethod.invoke(InvocableShellMethod.java:232)
        at org.springframework.shell.command.CommandExecution$DefaultCommandExecution.evaluate(CommandExecution.java:160)
        at org.springframework.shell.Shell.evaluate(Shell.java:208)
        at org.springframework.shell.Shell.run(Shell.java:140)
        at org.springframework.shell.jline.InteractiveShellRunner.run(InteractiveShellRunner.java:73)
        at org.springframework.shell.DefaultShellApplicationRunner.run(DefaultShellApplicationRunner.java:65)
        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:762)
        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:752)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
        at org.springframework.sbm.SpringShellApplication.main(SpringShellApplication.java:27)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)
        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)
        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)
        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)
Caused by: java.util.concurrent.CompletionException: java.lang.RuntimeException: Exception while visiting project file 'C:\Users\najia\Desktop\spring_boot_migrator_solution\workspace-mulesoft\mule-springboot\src\main\java\org\springframework\sbm\FlowConfigurations.java (in FlowConfigurations)', caused by: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0, at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
        at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:332)
        at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:347)
        at java.base/java.util.concurrent.CompletableFuture$BiRelay.tryFire(CompletableFuture.java:1498)
        at java.base/java.util.concurrent.CompletableFuture$CoCompletion.tryFire(CompletableFuture.java:1219)
        at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
        at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
        at org.openrewrite.scheduling.ForkJoinScheduler.lambda$schedule$0(ForkJoinScheduler.java:44)
        at java.base/java.util.concurrent.ForkJoinTask$AdaptedRunnableAction.exec(ForkJoinTask.java:1375)
        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: java.lang.RuntimeException: Exception while visiting project file 'C:\Users\najia\Desktop\spring_boot_migrator_solution\workspace-mulesoft\mule-springboot\src\main\java\org\springframework\sbm\FlowConfigurations.java (in FlowConfigurations)', caused by: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0, at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
        at org.springframework.sbm.openrewrite.RewriteExecutionContextErrorHandler.accept(RewriteExecutionContextErrorHandler.java:47)
        at org.springframework.sbm.openrewrite.RewriteExecutionContextErrorHandler.accept(RewriteExecutionContextErrorHandler.java:27)
        at org.openrewrite.RecipeScheduler.lambda$scheduleVisit$4(RecipeScheduler.java:228)
        at org.openrewrite.RecipeScheduler.lambda$mapAsync$0(RecipeScheduler.java:53)
        at org.openrewrite.scheduling.ForkJoinScheduler.lambda$schedule$0(ForkJoinScheduler.java:41)
        ... 6 more
Caused by: org.openrewrite.internal.RecipeRunException: Exception while visiting project file 'C:\Users\najia\Desktop\spring_boot_migrator_solution\workspace-mulesoft\mule-springboot\src\main\java\org\springframework\sbm\FlowConfigurations.java (in FlowConfigurations)', caused by: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0, at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
        at org.openrewrite.TreeVisitor.visit(TreeVisitor.java:324)
        at org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:356)
        at org.openrewrite.java.JavaVisitor.visitClassDeclaration(JavaVisitor.java:454)
        at org.openrewrite.java.JavaTemplate$2.visitClassDeclaration(JavaTemplate.java:274)
        at org.openrewrite.java.JavaTemplate$2.visitClassDeclaration(JavaTemplate.java:112)
        at org.openrewrite.java.tree.J$ClassDeclaration.acceptJava(J.java:1211)
        at org.openrewrite.java.tree.J.accept(J.java:64)
        at org.openrewrite.TreeVisitor.visit(TreeVisitor.java:276)
        at org.openrewrite.TreeVisitor.visit(TreeVisitor.java:172)
        at org.openrewrite.java.JavaTemplate.withTemplate(JavaTemplate.java:541)
        at org.openrewrite.java.JavaTemplate.withTemplate(JavaTemplate.java:42)
        at org.openrewrite.java.tree.J.withTemplate(J.java:91)
        at org.springframework.sbm.java.impl.OpenRewriteType$1.visitClassDeclaration(OpenRewriteType.java:170)
        at org.springframework.sbm.java.impl.OpenRewriteType$1.visitClassDeclaration(OpenRewriteType.java:155)
        at org.openrewrite.java.tree.J$ClassDeclaration.acceptJava(J.java:1211)
        at org.openrewrite.java.tree.J.accept(J.java:64)
        at org.openrewrite.TreeVisitor.visit(TreeVisitor.java:276)
        at org.openrewrite.TreeVisitor.visitAndCast(TreeVisitor.java:356)
        at org.openrewrite.java.JavaVisitor.lambda$visitCompilationUnit$10(JavaVisitor.java:473)
        at org.openrewrite.internal.ListUtils.lambda$map$0(ListUtils.java:141)
        at org.openrewrite.internal.ListUtils.map(ListUtils.java:123)
        at org.openrewrite.internal.ListUtils.map(ListUtils.java:141)
        at org.openrewrite.java.JavaVisitor.visitCompilationUnit(JavaVisitor.java:473)
        at org.openrewrite.java.JavaIsoVisitor.visitCompilationUnit(JavaIsoVisitor.java:119)
        at org.openrewrite.java.JavaIsoVisitor.visitCompilationUnit(JavaIsoVisitor.java:31)
        at org.openrewrite.java.JavaVisitor.visitJavaSourceFile(JavaVisitor.java:461)
        at org.openrewrite.java.JavaIsoVisitor.visitJavaSourceFile(JavaIsoVisitor.java:39)
        at org.openrewrite.java.JavaIsoVisitor.visitJavaSourceFile(JavaIsoVisitor.java:31)
        at org.openrewrite.java.tree.J$CompilationUnit.acceptJava(J.java:1514)
        at org.openrewrite.java.tree.J.accept(J.java:64)
        at org.openrewrite.TreeVisitor.visit(TreeVisitor.java:276)
        at org.openrewrite.RecipeScheduler.lambda$scheduleVisit$4(RecipeScheduler.java:224)
        ... 8 more
Caused by: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0
        at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
        at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70)
        at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:266)
        at java.base/java.util.Objects.checkIndex(Objects.java:361)
        at java.base/java.util.ArrayList.get(ArrayList.java:427)
        at org.openrewrite.java.internal.template.JavaTemplateParser.compileTemplate(JavaTemplateParser.java:247)
        at org.openrewrite.java.internal.template.JavaTemplateParser.parseBlockStatements(JavaTemplateParser.java:166)
        at org.openrewrite.java.JavaTemplate$2.visitBlock(JavaTemplate.java:133)
        at org.openrewrite.java.JavaTemplate$2.visitBlock(JavaTemplate.java:112)
        at org.openrewrite.java.tree.J$Block.acceptJava(J.java:761)
        at org.openrewrite.java.tree.J.accept(J.java:64)
        at org.openrewrite.TreeVisitor.visit(TreeVisitor.java:276)
        ... 39 more
mule-springboot:>
